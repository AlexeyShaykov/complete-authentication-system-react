import{o as g,a as x,c as u,b as S,d as j,j as r}from"./index-Dy5OmBMi.js";import{a as b,u as y,F,b as E,c as _,d as v,e as C,I as N,g as I,f as T}from"./input--87WhN_z.js";import{B as w}from"./button-CY6b6eVC.js";const B=g({email:x().email()}),P=()=>{const e=u.c(19),o=S();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={resolver:b(B),defaultValues:{email:""}},e[0]=l):l=e[0];const t=y(l);let m;e[1]!==t||e[2]!==o?(m=t.handleSubmit(async p=>{try{if(!(await fetch(`${j.VITE_API_BASE_URL}/change-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok){t.setError("root",{message:"Failed to change email"});return}o({to:"/"})}catch(h){console.error("Error changing email:",h),t.setError("root",{type:"manual",message:"Failed to change email. Please try again later."})}}),e[1]=t,e[2]=o,e[3]=m):m=e[3];const f=m;let s;e[4]!==t.control?(s=r.jsx(F,{control:t.control,name:"email",render:R}),e[4]=t.control,e[5]=s):s=e[5];const d=t.formState.isSubmitting?"Changing email...":"Change Email";let a;e[6]!==t.formState.isSubmitting||e[7]!==d?(a=r.jsx(w,{type:"submit",disabled:t.formState.isSubmitting,children:d}),e[6]=t.formState.isSubmitting,e[7]=d,e[8]=a):a=e[8];let n;e[9]!==t.formState.errors.root?(n=t.formState.errors.root&&r.jsx("p",{className:"text-red-500",children:t.formState.errors.root.message}),e[9]=t.formState.errors.root,e[10]=n):n=e[10];let i;e[11]!==f||e[12]!==s||e[13]!==a||e[14]!==n?(i=r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s,a,n]}),e[11]=f,e[12]=s,e[13]=a,e[14]=n,e[15]=i):i=e[15];let c;return e[16]!==t||e[17]!==i?(c=r.jsx("div",{className:"w-full",children:r.jsx(E,{...t,children:i})}),e[16]=t,e[17]=i,e[18]=c):c=e[18],c};function R(e){const{field:o}=e;return r.jsxs(_,{children:[r.jsx(v,{children:"Email"}),r.jsx(C,{children:r.jsx(N,{placeholder:"Email",...o})}),r.jsx(I,{children:"Enter your new email address."}),r.jsx(T,{})]})}const V=()=>{const e=u.c(1);let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{className:"flex flex-col items-center justify-center h-screen max-w-md mx-auto",children:r.jsx(P,{})}),e[0]=o):o=e[0],o};export{V as component};
